---
title:  "TIL - 2026/01/14/수"

categories:
  - Til
tags:
  - [Programming]

toc: true
toc_sticky: false
 
date: 2026-01-14
last_modified_at: 2026-01-14
---
<br>


직렬화 

1. 직렬화하려는 클래스 Serializable 인터페이스 구현해야 함

```java
import java.io.Serializable;

public class Person implements Serializable {
		private static final long serialVersionUID = 1L;
		// 이하 생략
}
```
- serialVersionUID : 직렬화 및 역직렬화 수행 시 클래스의 버전 의미
    - 역직렬화하려는 클래스으 버전이 기대하는 클래스의 버전과 다르다면 역직렬화 실패


```java
Person person = new Person("김철수", 25);



// 파일에 객체 직렬화하기

try (FileOutputStream fos = new FileOutputStream("person.ser");

ObjectOutputStream oos = new ObjectOutputStream(fos);

) {

oos.writeObject(person);

} catch (IOException e) {

e.printStackTrace();

}
```

- try-with-resources 
    - try 안에 선언된 도구들은 작업이 끝나면 자동으로 닫힘. 자원 누수 방지
    - FileOutputStream("person.ser") : 파일 만듦. 데이터를 바이트 단위로 파일에 보내주는 기초적인 통로
    - ObjectOutputStream(fos) : fos 위에 설치하는 객체 전용 포장기. Java 객체를 바이트 형태로 변환(직렬화)하여 통로로 밀어 넣어주는 역할
    - writeObject(person) : 메모리에 있던 person 객체의 데이터가 바이트 형태로 쪼개져서 파일에 기록됨
        - 프로그램이 종료되어 메모리에서 객체가 사라져도, person.ser 파일에는 해당 정보가 남음



역직렬화

```java
try (FileInputStream fis = new FileInputStream("person.ser");

ObjectInputStream ois = new ObjectInputStream(fis)) {

Person person = (Person) ois.readObject();

} catch (IOException | ClassNotFoundException e) {

e.printStackTrace();

}
```

1. 하드디스크에 저장해두었던 person.ser 파일 찾아냄 (person.ser = 직렬화된 바이트 데이터)
2. 역방향 통로 열기
    - FileInputStream() : 파일에서 바이트 데이터를 끌어오는 통로
    - ObjectInputStream : 바이트 데이터를 객체 형태로 조립
3. 객체 읽기
    - ois.readObject() : 데이터가 Person 객체로 합체
        - Object 타입으로 반환하기 때문에 사용할 타입으로 명시적 형변환 해줘야 함



예외
1. 입출력 및 직렬화 관련 예외(Checked Exception : 반드시 try-catch로 대비해야 함)
- IOException(Input/Output Exception) 
    - 언제 발생? 파일 읽기/쓰기, 네트워크 연결 등 외부 장치와의 통로(Stream)에 문제가 생겼을 때 발생
    - 예시) FileOutputStream으로 파일을 만들려는데 경로가 잘못되었거나, 하드 디스크 용량이 가득 찼을 때 발생
- ClassNotFoundException
    - 언제 발생? 역직렬화(readObject())할 때, 파일에 적힌 클래스 정보는 있는데 내 프로젝트 안에는 해당 클래스 파일(.class)이 없을 때 발생
2. 로직 및 데이터 관련 예외 (Unchecked Exception : RuntimeException 상속)
- IllegalArgumentException 
    - 언제 발생? 메서드가 전달된 인자가 적절하지 않을 때 발생
    - 예시) Message를 생성할 때 sender가 null이거나, 존재하지 않는 채널 ID를 넘겼을 때 throw new IllegalArgumentException("메시지 보낸이가 없습니다");와 같이 던질 수 있다.
- NullPointException
    - 언제 발생? null 참조 변수의 메서드를 호출하거나 필드에 접근하려 할 때 발생



Stream API

reduce : 하나의 값으로 응축하기
- 동작 방식 : (결과, 요소) -> 새로운 결과

```java
List<Integer> numbers = Arrays.asList(1, 2, 3, 4);

// 초기값 0에서 시작하여 모든 요소를 더함
int sum = numbers.stream()
                 .reduce(0, (a, b) -> a + b); // 결과: 10
```

collect : 원하는 형태로 수집하기
- 스트림의 요소들을 컬렉션(List, Set, Map)이나 다른 형태로 변환
```java
// 유저 리스트에서 이름만 뽑아 List<String>으로 만들기
List<String> names = userList.stream()
                             .map(User::getName)
                             .collect(Collectors.toList());
```