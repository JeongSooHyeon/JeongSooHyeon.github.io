---
title:  "TIL - 2026/01/21/수"

categories:
  - Til
tags:
  - [Programming]

toc: true
toc_sticky: false
 
date: 2026-01-21
last_modified_at: 2026-01-21
---
<br>
# Spring 핵심 개념 - TIL

## 계층형 아키텍처

비즈니스 로직을 계층별로 분리하여 관리하는 구조입니다.

---

## 프레임워크란?

프레임워크는 뼈대, 틀, 구조를 제공합니다.

**특징**
- 프레임을 기반으로 내부 구성 요소만 교체합니다.
- 전반적인 구조를 제공합니다.
- 공통된 작업(서버 통로 열기 등)을 프레임워크가 처리합니다.

**장점**
1. 개발 시간을 줄일 수 있습니다.
2. 일정 수준 이상의 품질을 기대할 수 있습니다.
3. 유지 보수가 쉽습니다 (비즈니스 로직만 남아있기 때문).

---

## IoC (제어의 역전)

### 개념

개발자가 갖고 있던 제어권을 Spring에게 넘기는 것입니다.

- 기존: 개발자가 main에서 직접 객체 생성 및 관리
- IoC: 객체 생성과 관리를 외부(Spring)에게 위임

생성자가 호출되는 시점에 제어권이 있으며, 이 제어권을 Spring이 가져갑니다.

### IoC 컨테이너 (Spring 컨테이너)

의존 관계 주입을 Spring 컨테이너가 담당합니다.

**BeanFactory**
- Bean 객체들을 생성, 관리, 설정, 소멸까지 전체 생명주기를 책임집니다.
- Bean을 생성하고 반환합니다.

**ApplicationContext**
- BeanFactory를 확장한 인터페이스입니다.
- 실무에서 가장 많이 사용합니다.
- 객체는 컨테이너가 소멸되는 시점에 대부분 소멸됩니다.

> **중요**: 빈은 애플리케이션이 실행되는 시점에 미리 만들어지고 종료할 때 사라집니다.

---

## Configuration Metadata

Bean으로 등록할 객체와 생성 방법에 대한 최소한의 정보입니다.

**설정 방법**
1. Java Config
2. **Annotation** (가장 많이 사용)

---

## Bean

### 정의

Spring 컨테이너가 관리하는 객체입니다. 일반적으로 POJO(Plain Old Java Object)입니다.

**POJO 특징**
- 특정 환경이나 기술에 종속되지 않습니다.
- 대부분의 Bean은 POJO이지만 아닐 수도 있습니다.
- 모든 POJO가 Bean은 아닙니다.

### Bean 등록 방법

**@Component**
- 클래스 레벨에 사용합니다.
- 이 클래스를 인스턴스화하면서 Bean이 됩니다.

```java
@Component
public class UserService {
    // ...
}
```

**@Configuration + @Bean**
- @Configuration은 클래스 레벨에 사용합니다.
- @Bean은 메서드 레벨에 사용합니다.
- 반환되는 객체를 Bean으로 등록합니다.

```java
@Configuration
public class AppConfig {
    @Bean
    public UserService userService() {
        return new UserService();
    }
}
```

### Bean 스코프

변수의 생애주기를 관리하는 스코프를 가지고 있습니다.

| 스코프 | 설명 | 비고 |
|--------|------|------|
| **singleton** | 단일 인스턴스를 공유해서 사용 | **(기본값)** |
| **prototype** | 요청할 때마다 새 인스턴스 생성 | |
| request | 하나의 HTTP 요청마다 인스턴스 생성 | |
| session | 세션마다 인스턴스 생성 | |

---

## DI (의존성 주입)

### 개념

다른 객체를 사용할 때 발생하는 관계입니다.

- `new`를 사용하면 결합도가 높아집니다 (해당 객체가 Bean일 경우).
- `@Bean`을 통해 주입받지 않으면 결합도가 높습니다.

**의존성이 필요한 이유**: 객체들 간의 유기적인 관계를 통해 하나의 애플리케이션을 만들기 위해서입니다.

### 의존성 주입 방법

**1. 생성자 주입 (권장)**

```java
@Component
public class UserService {
    private final UserRepository userRepository;
    
    // 생성자가 1개면 @Autowired 생략 가능
    public UserService(UserRepository userRepository) {
        this.userRepository = userRepository;
    }
}
```

**장점**
- 의존성 주입 시기가 빠릅니다 (인스턴스화와 동시).
- 초기화가 강제됩니다 (final 키워드 사용 가능).
- null일 가능성이 없습니다.

**2. Setter 주입 (잘 사용 안 함)**

동적으로 객체를 바꿔끼워야 할 때 사용합니다.

**단점**
- 의존성 주입 시기가 늦습니다 (인스턴스화 후).
- null일 수 있습니다.

**3. Field 주입 (사용하지 않음)**

```java
@Autowired
private UserRepository userRepository; // 권장하지 않음
```

---

## AOP (관점 지향 프로그래밍)

### 개념

비즈니스 로직과 별개로 공통된 기능을 묶어서 관리할 수 있는 것입니다. 객체지향 프로그래밍의 한계를 극복하기 위해 등장했습니다.

### 관심사의 분리

**공통 관심 사항 (Cross-Cutting Concerns)**
- 로깅
- 보안
- 트랜잭션
- 어디든 적용되어야 하는 기능들

**핵심 관심 사항 (Core Concerns)**
- 커피 주문
- 메뉴 등록
- 주문 변경
- 비즈니스 로직

AOP를 사용하면 공통 관심 사항을 분리하여 코드 중복을 줄이고 유지보수성을 높일 수 있습니다.

---

## 핵심 정리

- **IoC**: 제어권을 Spring에게 위임
- **Bean**: Spring 컨테이너가 관리하는 객체
- **DI**: 생성자 주입 권장, 결합도를 낮춤
- **AOP**: 공통 관심 사항을 분리하여 관리
- **Singleton**: Bean의 기본 스코프는 싱글톤